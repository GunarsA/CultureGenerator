<!DOCTYPE html>
<html>
  <head>
    <link href='http://fonts.googleapis.com/css?family=Oswald|Quattrocento' rel='stylesheet' type='text/css'>
    <meta charset="utf-8" />
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0'>

    <title>Plotting Multiple Points using the Google Maps JavaScript API – ERIC FRIES – a Web Developer in Brooklyn</title>

    <meta name="author" content="ERIC FRIES" />
    <meta name="description" content="a Web Developer in Brooklyn">

    <!--[if lt IE 9]>
      <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="alternate" type="application/rss+xml" title="ERIC FRIES - a Web Developer in Brooklyn" href="/feed.xml" />

    <!-- Created with Jekyll Now - http://github.com/barryclark/jekyll-now -->
  </head>

  <body>
    <div class="wrapper-masthead">
      <div class="container">
        <header class="masthead clearfix">
          <a href="/" class="site-avatar"><img src="http://ericfries.github.io/images/profile.jpeg" /></a>
          
          <div class="site-info">
            <h1 class="site-name"><a href="/">ERIC FRIES</a></h1>
            <p class="site-description">a Web Developer in Brooklyn</p>
          </div>
          
          <nav>
            <a href="/">Blog</a>
            <a href="/about">About</a>
           <a href="http://people.flatironschool.com/profiles/eric-fries" target="_blank">Projects</a>
          </nav>
        </header>
      </div>
    </div>

    <div id="main" role="main" class="container">
      <article class="post">
  <h1>Plotting Multiple Points using the Google Maps JavaScript API</h1>

  <div class="entry">
    <style type="text/css">
#map-canvas, #map-canvas-multiple-markers { height: 450px; width: 700px; margin: 0; padding: 0;}
</style>

<img src="/images/map.png">
<p>The <a href="https://developers.google.com/maps/documentation/javascript/">Google Maps JavaScript API</a> makes plotting a single point on a Google Map really simple.  But what if you need to plot multiple points?<p>

<h2>Single Marker Maps</h2>
<p>After signing up for an API key and placing it in the proper script tag on your page, the following code will create a map with one marker (note a <code>div</code> element with an <code>id</code> of <code>'map-canvas'</code> must also be on the page):</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">initialize</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">myLatlng</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">google</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">LatLng</span><span class="p">(</span><span class="o">-</span><span class="mf">25.363882</span><span class="p">,</span><span class="mf">131.044922</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">mapOptions</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">zoom</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
    <span class="na">center</span><span class="p">:</span> <span class="nx">myLatlng</span><span class="p">,</span>
    <span class="na">mapTypeId</span><span class="p">:</span> <span class="nx">google</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">MapTypeId</span><span class="p">.</span><span class="nx">SATELLITE</span>
  <span class="p">};</span>
  <span class="kd">var</span> <span class="nx">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">google</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">Map</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'map-canvas'</span><span class="p">),</span> <span class="nx">mapOptions</span><span class="p">);</span>

  <span class="kd">var</span> <span class="nx">marker</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">google</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">Marker</span><span class="p">({</span>
      <span class="na">position</span><span class="p">:</span> <span class="nx">myLatlng</span><span class="p">,</span>
      <span class="na">map</span><span class="p">:</span> <span class="nx">map</span><span class="p">,</span>
  <span class="p">});</span>
<span class="p">}</span>

<span class="nx">google</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">addDomListener</span><span class="p">(</span><span class="nb">window</span><span class="p">,</span> <span class="s1">'load'</span><span class="p">,</span> <span class="nx">initialize</span><span class="p">);</span></code></pre></figure>

<p>The last line of this code ensures that the <code>initialize</code> function is invoked only when the <code>window</code> is loaded.  The <code>initialize</code> function does several things.  First, it sets up the <code>myLatlng</code> variable and assigns it a new LatLng object.  Then it configures some basic map options including the zoom level and a center focus on the location held in the myLatlng object.  It then creates a new Map object (assigned to the variable <code>map</code>) by passing in the <code>div</code> element present on the page and the map options as arguments.  Finally, a single marker is created with a <code>position</code> property of the myLatlng object and a <code>map</code> property of the Map object.

<div id="map-canvas"></div>

<h2>Multiple Marker Maps</h2>
<p>Maps with multiple markers are a whole lot more interesting.  Fortunately, they aren't too much more difficult to create, and we can build on the same functionality above.  The following function will drop multiple markers on a map:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">dropPins</span><span class="p">(</span><span class="nx">allPoints</span><span class="p">,</span> <span class="nx">map</span><span class="p">){</span>
  <span class="kd">var</span> <span class="nx">infowindow</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">google</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">InfoWindow</span><span class="p">();</span> 
  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">allPoints</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">){</span>
    <span class="kd">var</span> <span class="nx">myLatlng</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">google</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">LatLng</span><span class="p">(</span><span class="nx">allPoints</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">latitude</span><span class="p">,</span> <span class="nx">allPoints</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">longitude</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">marker</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">google</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">Marker</span><span class="p">({</span>
        <span class="na">position</span><span class="p">:</span> <span class="nx">myLatlng</span><span class="p">,</span>
        <span class="na">map</span><span class="p">:</span> <span class="nx">map</span><span class="p">,</span>
        <span class="na">animation</span><span class="p">:</span> <span class="nx">google</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">Animation</span><span class="p">.</span><span class="nx">DROP</span>
    <span class="p">});</span>
    <span class="nx">google</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">addListener</span><span class="p">(</span><span class="nx">marker</span><span class="p">,</span> <span class="s1">'click'</span><span class="p">,</span> <span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">marker</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">infowindow</span><span class="p">.</span><span class="nx">setContent</span><span class="p">(</span><span class="s2">"&lt;ul&gt;&lt;li&gt;Latitude "</span> <span class="o">+</span> <span class="nx">allPoints</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">latitude</span> <span class="o">+</span> <span class="s2">"&lt;/li&gt;&lt;li&gt;Longitude "</span> <span class="o">+</span> <span class="nx">allPoints</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">longitude</span> <span class="o">+</span> <span class="s2">"&lt;/li&gt;&lt;/ul&gt;"</span><span class="p">);</span>
      <span class="nx">infowindow</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="nx">map</span><span class="p">,</span> <span class="nx">marker</span><span class="p">);</span>
    <span class="p">};</span>
  <span class="p">})(</span><span class="nx">marker</span><span class="p">,</span> <span class="nx">i</span><span class="p">));</span>  
  <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p> First off, the <code>dropPins</code> function should be invoked inside the <code>initialize</code> function.  This will provide access to the <code>map</code> variable created in the <code>initialize</code> function.  The <code>initialize</code> function also needs to be modified to accept an array of JavaScript objects that we will create markers for.  This array will then be passed in to <code>dropPins</code>.  Each object in the <code>allPoints</code> array has both <code>latitude</code> and <code>longitude</code> properties.</p>

<p>The first thing <code>dropPins</code> does is create a single InfoWindow object.  An InfoWindow is the box that appears containing information when a marker is created.  Note that although we are creating multiple markers, only one InfoWindow is created (more on that later).  Then <code>dropPins</code> iterates through the objects in the <code>allPoints</code> array, and creates Latlng and Marker objects for each object.  Finally, an event listener is added to each newly created marker that opens the InfoWindow and resets its content based on the Marker clicked.  This is a neat trick (thank you <a href="http://stackoverflow.com/questions/3059044/google-maps-js-api-v3-simple-multiple-marker-example">Stackoverflow</a>) that allows one InfoWindow to be reused rather than trying than creating many, and having to deal with the complexities of creating event listeners to open and close inactive InfoWindows.  Here's the map with multiple markers in action:  </p>

<div id="map-canvas-multiple-markers"></div>

<script type="text/javascript"
src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC7SPc9uf8gF7XhOG_WjWbHkHvRy0cLWaQ">
</script>

<script>
function initialize() {
  var myLatlng = new google.maps.LatLng(-25.363882,131.044922);
  var mapOptions = {
    zoom: 4,
    center: myLatlng,
    mapTypeId: google.maps.MapTypeId.SATELLITE
  };
  var map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);

  var marker = new google.maps.Marker({
      position: myLatlng,
      map: map,
  });
  initializeMultiple(allPoints);
}

var allPoints = [{latitude: 40.8191951, longitude: -73.957038},{latitude: 40.7491951, longitude: -73.967038}, {latitude: 40.7791951, longitude: -73.907038},];

function initializeMultiple(allPoints) {
  var myLatlng = new google.maps.LatLng(allPoints[0].latitude,allPoints[0].longitude);
  var mapOptions = {
    zoom: 11,
    center: myLatlng,
    mapTypeId: google.maps.MapTypeId.SATELLITE
  };
  var map = new google.maps.Map(document.getElementById('map-canvas-multiple-markers'), mapOptions);

  dropPins(allPoints, map);

}

function dropPins(allPoints, map){
  var infowindow = new google.maps.InfoWindow(); 
  for (var i = 0; i < allPoints.length; i++){
    var myLatlng = new google.maps.LatLng(allPoints[i].latitude, allPoints[i].longitude);
    var marker = new google.maps.Marker({
        position: myLatlng,
        map: map,
        animation: google.maps.Animation.DROP
    });
    google.maps.event.addListener(marker, 'click', (function(marker, i) {
    return function() {
    	infowindow.setContent("<ul><li>Latitude " + allPoints[i].latitude + "</li><li>Longitude " + allPoints[i].longitude + "</li></ul>");
      infowindow.open(map, marker);
    };
  })(marker, i));  
  }
}
google.maps.event.addDomListener(window, 'load', initialize);

</script>


  </div>

  <div class="date">
    Written on May 10, 2015
  </div>

  
</article>
    </div>

    <div class="wrapper-footer">
      <div class="container">
        <footer class="footer">
          
<a href="mailto:ericfries@gmail.com"><i class="svg-icon email"></i></a>


<a href="http://github.com/EricFries"><i class="svg-icon github"></i></a>




<a href="http://twitter.com/mixolydian12"><i class="svg-icon twitter"></i></a>
<a href="http://stackoverflow.com/users/4430004/eric-fries"><i class="svg-icon stackoverflow"></i></a>

          <br>© 2015 Eric Fries
        </footer>
      </div>
    </div>

    
	<!-- Google Analytics -->
	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
		
		ga('create', 'UA-59773860-1', 'auto');
		ga('send', 'pageview');
	</script>
	<!-- End Google Analytics -->


  </body>
</html>
